"use strict";(self.webpackChunktonswap_web=self.webpackChunktonswap_web||[]).push([[960],{47960:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var i=n(9774),r=n(30357),o=n(45366),s=n(18740),a=n(68963),u=n(55195),c=n(79711),d=n(80124),l=n(51947),v=n(94361),f=n(74650),m=n(88027),x=n(19867),p=n(71545),Z=n(5922),h=n(74165),k=n(15861),T=n(29439),y=n(81003),g=n(63317),A=n(77563),I=n(84672),j=n(75),q=n(70123),L=n(45022),R=n(87673),b=n(66198),D=n(75859),E=function(){var e=(0,x.x)(),t=e.srcTokenAmount,n=e.destTokenAmount,i=e.selectedToken,r=(0,a.useState)(!1),o=(0,T.Z)(r,2),s=o[0],c=o[1],d=(0,a.useState)(!0),l=(0,T.Z)(d,2),f=l[0],m=l[1],p=(0,u.$)().t,E=(0,b.a)().fetchPoolData,M=function(){var e=(0,k.Z)((0,h.Z)().mark((function e(t,n,r,o){var s,a;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==i&&void 0!==i&&i.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.kI(null===i||void 0===i?void 0:i.tokenMinter);case 4:if("0"!=(s=e.sent).tokenReserves.toString()||"0"!=s.tonReserves.toString()){e.next=7;break}return e.abrupt("return",0);case 7:return e.next=9,A.hZ(t,n,r,o);case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(i){var e=function(){var e=(0,k.Z)((0,h.Z)().mark((function e(){var t;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.E3(L.Address.parse(i.ammMinter),i.ammVersion);case 3:t=e.sent,(0,Z.wE)(t.tokenReserves,null===i||void 0===i?void 0:i.decimals),(0,Z.wE)(t.tonReserves,9),t.tokenReserves.isZero()||t.tonReserves.isZero()||c(!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,9,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}}),[i]);return(0,I.Z)(),!i||f?(0,D.jsx)(R.Z,{}):(0,D.jsx)(g.Z,{icon:(0,D.jsx)(q.Z,{}),getAmountFunc:M,getBalances:function(){return Promise.all([A.gF(),A.yX(i)])},srcToken:y.nS,getTxRequest:function(){if(v.Z.addLiquidityTransaction(),i)return A.El(null===i||void 0===i?void 0:i.tokenMinter,t,n)},destToken:i,submitButtonText:p("add-ton-liquidity",{token:null===i||void 0===i?void 0:i.displayName}),refreshAmountsOnActionChange:!0,actionCategory:j.hX.MANAGE_LIQUIDITY,actionType:j.Us.ADD_LIQUIDITY,gasFee:A.et.ADD_LIQUIDITY,disableInputDependency:!s,onSuccess:E})},M=n(99307),w=function(){var e=(0,x.x)(),t=e.srcTokenAmount,n=e.selectedToken,i=(0,u.$)().t,r=(0,b.a)().fetchPoolData;return(0,I.Z)(),n?(0,D.jsx)(g.Z,{icon:(0,D.jsx)(M.Z,{}),getTxRequest:function(){return v.Z.removeLiquidityTransaction(),A.WU(n.tokenMinter,t)},getAmountFunc:A.hZ,getBalances:function(){return A.xN(n.tokenMinter)},srcToken:y.nS,destToken:n,submitButtonText:i("remove-ton-liquidity",{token:null===n||void 0===n?void 0:n.displayName}),refreshAmountsOnActionChange:!0,actionCategory:j.hX.MANAGE_LIQUIDITY,actionType:j.Us.REMOVE_LIQUIDITY,gasFee:A.et.REMOVE_LIQUIDITY,onSuccess:r}):null};var U=function(){var e=(0,x.x)().selectedToken,t=(0,s.Z)(),n=(0,c.UO)(),h=(0,Z.xB)(n),k=(0,f.Kr)().onOperationTypeChange,T=(0,u.$)().t,y=(0,x.O)(),g=y.toggleRemoveLiquidity,A=y.toggleAddLiquidity;(0,o.Z)((function(){k(m.C8.MANAGE_LIQUIDITY)}));var I=(0,a.useMemo)((function(){return e?[{text:"add-liquidity",method:function(){v.Z.goToAddLiquidity(),A()}},{text:"remove-liquidity",method:function(){v.Z.goToRemoveLiquidity(),g()}}]:[]}),[t,e]),j=(0,a.useCallback)((function(e){t(d.Z.manageLiquidity.navigateToAddLiquidity.replace(":id",e.tokenMinter)),v.Z.selectTokenToTrade(e.displayName)}),[t]);return(0,D.jsxs)(p.Fi,{children:[e&&(0,D.jsx)(r.Z,{items:I,action:h}),(0,D.jsxs)(c.Z5,{children:[(0,D.jsx)(c.AW,{path:d.Z.manageLiquidity.addLiquidity,element:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E,{}),(0,D.jsx)(i.E,{})]})}),(0,D.jsx)(c.AW,{path:d.Z.manageLiquidity.removeLiquidity,element:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w,{}),(0,D.jsx)(i.E,{})]})}),(0,D.jsx)(c.AW,{path:d.Z.manageLiquidity.tokens,element:(0,D.jsx)(l.n,{onTokenSelect:j,title:T("select-token-liquidity")})})]})]})}},70123:function(e,t,n){var i=n(64836);t.Z=void 0;var r=i(n(43563)),o=n(75859),s=(0,r.default)((0,o.jsx)("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"}),"AddRounded");t.Z=s},99307:function(e,t,n){var i=n(64836);t.Z=void 0;var r=i(n(43563)),o=n(75859),s=(0,r.default)((0,o.jsx)("path",{d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"}),"RemoveRounded");t.Z=s}}]);